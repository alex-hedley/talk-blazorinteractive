<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<meta name="description" content="BlazorInteractive (Talk)">
		<meta name="keywords" content="Blazor, Interactive, WASM, Web Assembly, C#, Try.NET, .NET">
		<meta name="author" content="Alex Hedley">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<link rel="canonical" href="https://alex-hedley.github.io/talk-blazorinteractive" />
		<link rel="icon" href="favicon.ico" />
		
		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/black.css" id="theme">
		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/monokai.css">

		<title>BlazorInteractive (üéôÔ∏è Talk)</title>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				
				<!-- Slide -->
				<section data-background-gradient="radial-gradient(#5C2D91, #ccc)"">
					<a href="https://alex-hedley.github.io" target="_blank">
						<img src="images/AlexHedley.jpg" alt="Alex Hedley" style="height: 180px; margin: 0 auto 4rem auto; background: transparent;">
					</a>
					<a href="https://github.com/alex-hedley/BlazorInteractive" target="_blank">
						<img src="images/Blazor_Logo.png" alt="Blazor (Logo)" style="height: 180px; margin: 0 auto 4rem auto; background: transparent;">
					</a>
					<h3>Blazor Interactive</h3>

					<small><blockquote>Building a clone of Try.NET (.NET Interactive) in Blazor WASM</blockquote></small>
					
					<p>
						<small>Created by <a href="https://alexhedley.com/" target="_blank">Alex Hedley</a></small>
					</p>

					<div style="display: flex; align-items: center; justify-content: center; gap: 2rem;">
						<small>Find me: </small>
						<a href="https://github.com/alex-hedley/" target="_blank">
							<img src="images/GitHub.png" alt="GitHub Invertocat" height="30" />
						</a>
						<a href="https://www.linkedin.com/in/alexhedley/" target="_blank">
							<img src="images/LinkedIn.png" alt="LinkedIn" height="30" />
						</a>
						<a href="https://opencastsoftware.com/careers/vacancies/all-vacancies/" target="_blank">
							<img src="images/Opencast.jpg" alt="Opencast" height="30" />
						</a>
					</div>

					<p>
						<small>Slides: <a href="https://github.com/alex-hedley/talk-blazorinteractive" target="https://github.com/alex-hedley/talk-blazorinteractive">https://github.com/alex-hedley/talk-blazorinteractive</a></small>
					</p>
				</section>

				<!-- Slide -->
				<section>
					<h3>Journey</h3>
					<p>
						<a href="https://try.dot.net" target="_blank">
							<img src="images/try.net.png" alt="Try .NET" style="height: 300px; margin: 0 auto 2rem auto; background: transparent;"/>
						</a>
					</p>

					<p><a href="https://try.dot.net" target="_blank">Try .NET</a></p>
					<p>Runnable .NET code on your site</p>
					<p><small>[<a href="https://dotnet.microsoft.com/en-us/platform/try-dotnet" target="_blank">Documentation</a>] [<a href="https://github.com/dotnet/try" target="_blank">Code</a>]</small></p>
				</section>

				<!-- Slide -->
				<section>
					<h3>.NET Interactive</h3>
					<p>Install the .NET global tool <a href="https://www.nuget.org/packages/Microsoft.dotnet-interactive" target="_blank">nuget package</a>. <small>[<a href="https://github.com/dotnet/interactive" target="_blank">code</a>]</small></p>
					<small><blockquote>Command line tool for interactive programming with C#, F#, and PowerShell, including support for Jupyter Notebooks.</blockquote></small>
					<p>Client / Server</p>
				</section>

				<!-- DEMO -->
				<section>
					<!-- Slide -->
					<section>
						<h2>.NET Interactive</h2>
						<h3>Demo</h3>
					</section>

					<!-- Slide -->
					<section>
						<h2>.NET Interactive</h2>
						<p><small>Install: <code>dotnet tool install --global Microsoft.dotnet-interactive --version 1.0.431302</code></small></p>

						<p>
							<small>Run: <code>dotnet interactive stdio --http-port 9000</code></small>
							<img src="images/demo/dotnetinteractive-start.png" alt=".NET Interactive (Start)" style="height: 400px; margin: 0 auto 2rem auto; background: transparent;"/>
						</p>

						<aside class="notes">
							<p>Need the `dotnet-interactive` tool running as a separate process.</p>
							<p><code>dotnet interactive stdio --http-port 9000</code></p>
							<p>Then connect to it via js.</p>
							<p><strong><code>http</code></strong> - <code>dotnet interactive http --http-port 9000</code> was the original</p>
						</aside>
					</section>

					<!-- Slide -->
					<section>
						<h2>.NET Interactive</h2>
						
						<p>
							<small><code>npm run start</code></small>
							<img src="images/demo/site-start.png" alt="npm (Start)" style="height: 200px; margin: 0 auto 2rem auto; background: transparent;"/>
						<br />
							<small>open <em>http://127.0.0.1:8080</em></small>
							<img src="images/demo/site-localhost.png" alt="site (localhost)" style="height: 200px; margin: 0 auto 2rem auto; background: transparent;"/>
						</p>
						<p>Some extra HTML/JS code to connect to .NET Interactive.</p>
						
					</section>

					<!-- Slide -->
					<section>
						<h3>.NET Interactive</h3>
						<h4>Demo - Events</h4>
						<p>
							<small>There are a number of events you can listen for and take action on:</small>
							<ul>
								<li>DisplayedValueProduced</li>
								<li>CodeSubmissionReceived</li>
								<li>CompleteCodeSubmissionReceived</li>
								<li>CodeSubmissionReceived</li>
								<li>CompleteCodeSubmissionReceived</li>
								<li>CodeSubmissionReceived</li>
								<li>CompleteCodeSubmissionReceived</li>
								<li>StandardOutputValueProduced</li>
								<li>CommandSucceeded</li>
							</ul>
						</p>
					</section>

					<!-- Slide -->
					<section>
						<h2>.NET Interactive</h2>
						<h3>Demo</h3>
						
						<img src="images/demo/site-events.png" alt="site (events)" style="height: 500px; margin: 0 auto 2rem auto; background: transparent;"/>
					</section>
				</section>

				<!-- Slide -->
				<section>
					<h3>What is Blazor Interactive?</h3>
					<p>A website to write, compile and run code, in the browser.</p>
					<img src="images/BlazorInteractive_Demo_1.png" alt="BlazorInteractive - Demo (1)" style="height: 300px; margin: 0 auto 2rem auto; background: transparent;"/>
					<p>Think <a href="https://dotnetfiddle.net" target="_blank">.NET Fiddle</a>.</p>

					<aside class="notes">
						<p>Blazor C# Interactive (Try .NET)</p>
						<p>VB.NET / F# coming soon.</p>
						<p>(NuGet too)</p>
					</aside>
				</section>

				<!-- Compilation -->
				<section>
					<!-- Slide -->
					<section>
						<h2>Run through</h2>
						<p>The anatomy of Blazor Interactive!</p>
					</section>

					<!-- Slide -->
					<section>
						<h2>Compilation</h2>
						<p><code>CSharpCompilation.CreateScriptCompilation</code></p>
					</section>

					<!-- Slide -->
					<section>
						<h2>Journey</h2>
						<div class="mermaid" style="height: 300px;">
							<pre>
								%%{init: {'theme': 'dark', 'themeVariables': { 'darkMode': true }}}%%
								flowchart LR
									A[SyntaxTree] --> E;
									B[CompilationOptions]--> E;
									C[MetadataReferences] --> E;
									D[Name] --> E;
									E[Compiler] --> F;
									F{Emit} --> G;
									G[Assembly] --> H;
									H{Create} --> I;
									I{Invoke} --> *;
							</pre>
						</div>
					</section>

					<!-- Slide -->
					<section>
						<h2>Syntax Tree</h2>
						<p>Firstly you need to build a <code>SyntaxTree</code> using the code provided.</p>

						<aside class="notes">
							<p>This is where you could add the <a href="https://microsoft.github.io/monaco-editor/" target="_blank">MonacoEditor</a>  m0-sdfor a rich code writing experience.</p>
						</aside>
					</section>

					<!-- Slide -->
					<section>
						<h2>Compilation Options</h2>
						<p>Do you want to output a <code>DLL</code> or a <code>Console App</code>?</p>
						<p>Also you need to pass a list of <code>usings</code>, prob best to add <code>System</code> as a minimum.</p>
					</section>

					<!-- Slide -->
					<section>
						<h2>Metadata References</h2>
						<p>Usually able to get these from the <code>AppDomain</code>.</p>

						<p><small>More on this later...</small></p>
					</section>

					<!-- Slide -->
					<section>
						<h2>Publish Trimmed</h2>

						<p>This was added to the Blazor application <code>.csproj</code> so dlls weren't bundled together and we could make use of them in the list.</p>
						<pre><code data-trim data-noescape>
							&lt;PropertyGroup&gt;
								&lt;PublishTrimmed&gt;false&lt;/PublishTrimmed&gt;
							&lt;/PropertyGroup&gt;
						</code></pre>
						
					</section>

					<!-- Slide -->
					<section>
						<h2>Network Requests</h2>
						<img src="images/site/DevTools_Network_1.png" alt="Network" 
							style="height: 500px; margin: 0 auto 2rem auto; background: transparent;"/>
					</section>

					<!-- Slide -->
					<section>
						<h2>Network Requests</h2>
						<img src="images/site/DevTools_Network_2.png" alt="Network" 
							style="height: 500px; margin: 0 auto 2rem auto; background: transparent;"/>
					</section>

					<!-- Slide -->
					<section>
						<h2>blazor.boot.json</h2>
						<p>This contains a list of the DLLs related to the project.</p>
						<img src="images/site/blazor.boot.json.png" alt="blazor.boot.json" 
							style="height: 500px; margin: 0 auto 2rem auto; background: transparent;"/>
					
							<aside class="notes">
								<p>Blazor WASM DLLs: <a href="https://stackoverflow.com/a/73944260" target="_blank">https://stackoverflow.com/a/73944260</a>.</p>
							</aside>
							
						</section>

					<!-- Slide -->
					<section>
						<h2>Cache Storage (Application)</h2>
						<img src="images/site/DevTools_Application_CacheStorage.png" alt="Cache Storage - Application" 
							style="height: 500px; margin: 0 auto 2rem auto; background: transparent;"/>
					</section>
					
					<!-- Slide -->
					<section>
						<h2>Steps</h2>
						<ul>
							<li>Reference Filter (from <code>blazor.boot.json</code>)</li>
							<li>Reference Resolver (Local / Remote)</li>
							<ul>
								<li>Assembly Accessor (Local / Blazor)</li>
							</ul>	
							<li>Code Compiler</li>
							<li>Assembly Loader</li>
							<li>Assembly Invoker</li>
						</ul>

						<div class="mermaid" style="height: 300px;">
							<pre>
								%%{init: {'theme': 'dark', 'themeVariables': { 'darkMode': true }}}%%
								graph LR;

									subgraph Page
										A[Reference Filter];

										B[Reference Resolver] --> C
										C[Compile] --> D
										D[Assembly Loader]

										subgraph Load
											E[Emit] --> F
											F[Load]
										end

										subgraph Invoke
											G[Create Instance] --> H
											H[Invoke Member]
										end

										I[Console Display]
									end
								
							</pre>
						</div>

						<aside class="notes">
							<p>Get a list of Assemblies - from that get the References, pass them to the Compiler.</p>
							<p>From the compilied DLL load this new Assembly then Invoke to produce the output.</p>
						</aside>
					</section>

					<!-- Slide -->
					<section>
						<h2>Upcoming Features</h2>
						<ul>
							<li>VB.NET & F# Support</li>
							<li>Stats</li>
							<li>nuget</li>
							<li>IL visualisation</li>
							<li>RoslynQuoter - A Roslyn tool that for a given C# program shows the syntax factory API calls to construct its syntax tree.</li>
						</ul>

						<aside class="notes">
							<p>RoslynQuoter @KirillOsenkov - https://github.com/KirillOsenkov/RoslynQuoter</p>
							<p>DependenSee - Dotnet project and package dependency visualizer.- https://github.com/madushans/DependenSee</p>
						</aside>
					</section>

					<!-- Slide -->
					<!-- <section>
					</section> -->
					
				</section>
				
				<!-- Inspiration -->
				<section>
					<!-- Slide -->
					<section>
						<h3>Inspiration</h3>

						<h4>Try .NET</h4>
						<ul>
							<li>
								<a href="https://try.dot.net" target="_blank">Try .NET</a>
							</li>
							<li>
								<a href="https://dotnet.microsoft.com/en-us/platform/try-dotnet" target="_blank">Try .NET  - Documentation</a>
							</li>
							<li>
								<a href="https://github.com/dotnet/try" target="_blank">Try .NET - code</a>
							</li>
						</ul>
					</section>

					<!-- Slide -->
					<section>
						<h3>Inspiration</h3>
						
						<h4>.NET Interactive</h4>
						<ul>
							<li>
								üìù <a href="https://devblogs.microsoft.com/dotnet/net-interactive-is-here-net-notebooks-preview-2/" target="_blank">.NET Interactive is here! | .NET Notebooks Preview 2</a>
							</li>
							<li>
								<a href="https://github.com/dotnet/interactive" target="_blank">.NET Interactive (code)</a>
								<ul>
									<li>
										<a href="https://github.com/dotnet/interactive/issues/800" target="_blank">[QUESTION]: Can .NET interactive be embedded in a Web Application? #800 (ISSUE)</a>
									</li>
									<li>
										<a href="https://github.com/dotnet/interactive/discussions/2612" target="_blank">[QUESTION]: Can .NET interactive be embedded in a Web Application? #2612 (DISCUSSION)</a>
									</li>
								</ul>
							</li>
						</ul>
					</section>

					<!-- Slide -->
					<section>
						<h3>Inspiration</h3>

						<h4>Experiments</h4>
						<ul>
							<li>
								<a href="https://github.com/alex-hedley/dotnet-interactive-experiments" target="_blank">.NET Interactive Experiments</a>
								<ul>
									<li><a href="https://github.com/colombod/dotnet-interactive-experiments" target="_blank">.NET Interactive Experiments (Original) @colombod</a></li>
								</ul>
							</li>
						</ul>
					</section>

					<!-- Slide -->
					<section>
						<h3>Inspiration</h3>

						<h4>Blazor</h4>
						<ul>
							<li>
								<a href="https://www.strathweb.com/2019/06/building-a-c-interactive-shell-in-a-browser-with-blazor-webassembly-and-roslyn/">Building a C# Interactive shell in a browser with Blazor (WebAssembly) and Roslyn</a> by <a href="https://github.com/filipw">Filip W</a> üóìÔ∏è June 7th 2019
							</li>
							<li>
								<a href="https://github.com/filipw/Strathweb.Samples.BlazorCSharpInteractive" target="_blank">Strathweb.Samples.BlazorCSharpInteractive</a> @filipw
								<ul>
									<li>
										<a href="https://github.com/alex-hedley/Strathweb.Samples.BlazorCSharpInteractive" target="_blank">FORK</a>
									</li>
									<li>
										<a href="https://alex-hedley.github.io/Strathweb.Samples.BlazorCSharpInteractive/" target="_blank">DEMO</a>
									</li>
								</ul>
							</li>
						</ul>
					</section>

				</section>

				<!-- Slide -->
				<section>
					<h3>Future</h3>
					
					<h4>@SteveSanderson</h4>
					<ul>
						<li>üê§ <a href="https://twitter.com/stevensanderson/status/1658845798212202496?s=20" target="_blank">WASI support in .NET 8</a></li>
						<li>üìº <a href="https://www.youtube.com/watch?v=gKX-cdqnb8I" target="_blank">Experiments with the new WASI workload in .NET 8 Preview 4</a></li>
					</ul>
					<hr />
					<ul>
						<li>
							WASI SDK <a href="https://github.com/SteveSandersonMS/dotnet-wasi-sdk" target="_blank">Experimental WASI SDK for .NET Core</a>
						</li>
						<li>
							Wasmtime <a href="https://wasmtime.dev" target="_blank">Site</a>
						</li>
						<ul>
							<li>A fast and secure runtime for WebAssembly</li>
						</ul>
					</ul>
					
					<hr />

					<h4>Hacking</h4>
					<ul>
						<li>
							<a href="https://github.com/alex-hedley/dotnet-interactive-blazor-wasm" target="_blank">.NET Interactive Blazor (WASM)</a>
						</li>
					</ul>

					<aside class="notes">
						<p>Wasi.Sdk is an experimental package that can build .NET Core projects (including whole ASP.NET Core applications) into standalone WASI-compliant .wasm files. These can then be run in standard WASI environments or custom WASI-like hosts.</p>
						<p>Steve Sanderson @stevensanderson - Just published a video: an update on WASI support in .NET 8, and some prototypes that push the boundaries of what you can do with .NET + WebAssembly https://www.youtube.com/watch?v=gKX-cdqnb8I</p>
					</aside>
				</section>

				<!-- Contributors -->
				<section>
					<h3>Contributors</h3>
					<p>This has been a team effort!</p>
					<p>Thanks to Daniel Doyle (<img src="https://avatars.githubusercontent.com/u/3020488?s=50&v=4" /> <a href="https://github.com/TheDanielDoyle" target="_blank">@TheDanielDoyle</a>) and Rob Anderson (<img src="https://avatars3.githubusercontent.com/u/46314954?s=50&v=4" /> <a href="https://github.com/jamsidedown/" target="_blank">@jamsidedown</a>) for their continued support and mobbing on this application.</p>
					<p>It's been great to work alongside people to create something, instead of being a lone wolf.</p>
				</section>

				<!-- Slide -->
				<section>
					<h2>Any Questions ‚ùì</h2>
				</section>

				<!-- Slide -->
				<section>
					<h2>Thanks üëèüèª</h2>
				</section>

				<!-- Slide -->
				<!-- <section>
				</section> -->

			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/zoom/zoom.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/search/search.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/reveal.js-mermaid-plugin@2.0.0/plugin/mermaid/mermaid.js"></script>
		<script>
			Reveal.initialize({
				slideNumber: 'c/t',
				controls: true,
				progress: true,
				center: true,
				hash: true,
				mermaid: {},
				plugins: [ RevealZoom, RevealNotes, RevealSearch, RevealMarkdown, RevealHighlight, RevealMermaid ]
			});
		</script>
	</body>
</html>
